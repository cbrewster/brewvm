# --- Arch/base ---
CONFIG_64BIT=y
CONFIG_X86_64=y
CONFIG_MMU=y
CONFIG_EXPERT=y
CONFIG_EMBEDDED=y
CONFIG_PVH=y

# Keep printk so you get messages; make life easier while minimal.
CONFIG_PRINTK=y

# --- TTY/Console plumbing required by virtio-console ---
CONFIG_TTY=y
# Use the hypervisor virtual console (hvc) and allow it to be the kernel console.
CONFIG_HVC_DRIVER=y
CONFIG_HVC_CONSOLE=y
CONFIG_HVC_IRQ=y
CONFIG_HVC_VIRTIO=y

# --- Virtio core + mmio + console ---
CONFIG_VIRTIO=y
CONFIG_VIRTIO_RING=y
CONFIG_VIRTIO_MMIO=y
CONFIG_VIRTIO_MMIO_CMDLINE_DEVICES=y
CONFIG_VIRTIO_CONSOLE=y

# --- Trim aggressively (say "no" to common buses/features not needed here) ---
CONFIG_PCI=n
CONFIG_NET=n
CONFIG_BLOCK=n
CONFIG_SCSI=n
CONFIG_ATA=n
CONFIG_INPUT=n
CONFIG_SERIO=n
CONFIG_USB=n
CONFIG_DRM=n
CONFIG_SOUND=n
CONFIG_FW_LOADER=n
# Disable VT to shave more off; not needed for hvc.
CONFIG_VT=n
# Avoid serial 8250 so you don't accidentally get ttyS0.
CONFIG_SERIAL_8250=n

# --- Initramfs support ---
CONFIG_BLK_DEV_INITRD=y

# --- devtmpfs support for /dev ---
CONFIG_DEVTMPFS=y
CONFIG_DEVTMPFS_MOUNT=y
